{% extends 'layout.html' %}{%block initgame%}
<br> {% load static %}
<div class="row">
    <div class="col s7 push-s5 center">
        <span class="flow-text">
            <div class="row inicial" ondragover="drop(event)">
              <img class="img_base">

              <img class="img_peon" draggable='true'  ondragstart="dragIniciado(event)" ondragend="dragFinalizado(event)" id='fichaNegra' src="{% static 'img/peon-negro.png' %}" width="40px" alt="">
              <img class="img_peon" draggable='true'  ondragstart="dragIniciado(event)" ondragend="dragFinalizado(event)" id='fichaNegra' src="{% static 'img/peon-negro.png' %}" width="40px" alt="">
              <img class="img_peon" draggable='true'  ondragstart="dragIniciado(event)" ondragend="dragFinalizado(event)" id='fichaNegra' src="{% static 'img/peon-negro.png' %}" width="40px" alt="">
              <img class="img_peon" draggable='true'  ondragstart="dragIniciado(event)" ondragend="dragFinalizado(event)" id='fichaNegra' src="{% static 'img/peon-negro.png' %}" width="40px" alt="">
              <img class="img_peon" draggable='true'  ondragstart="dragIniciado(event)" ondragend="dragFinalizado(event)" id='fichaNegra' src="{% static 'img/peon-negro.png' %}" width="40px" alt="">
              <img class="img_peon" draggable='true'  ondragstart="dragIniciado(event)" ondragend="dragFinalizado(event)" id='fichaNegra' src="{% static 'img/peon-negro.png' %}" width="40px" alt="">

            </div>

            <img class="img_peon" src="{% static 'img/barra.png' %}" width="370px" height="10px" alt="">

            <div class="row" ondragover="drop(event)" >
              <img class="img_base">
              <img class="img_peon" draggable='true' ondragstart="dragIniciado(event)" ondragend="dragFinalizado(event)" id='fichaNegra' src="{% static 'img/peon-negro.png' %}" width="40px" alt="">

              <img class="img_peon" draggable='true' ondragstart="dragIniciado(event)" ondragend="dragFinalizado(event)" id='fichaRoja' src="{% static 'img/peon-rojo.png' %}" width="45px" alt="">

            </div>
            <img class="img_peon" src="{% static 'img/barra.png' %}" width="370px" height="10px" alt="">

            <div class="row" ondragover="drop(event)">
              <img class="img_base">

              <img class="img_peon" draggable='true' ondragstart="dragIniciado(event)" ondragend="dragFinalizado(event)" id='fichaNegra' src="{% static 'img/peon-negro.png' %}" width="40px" alt="">

              <img class="img_peon" draggable='true' ondragstart="dragIniciado(event)" ondragend="dragFinalizado(event)" id='fichaRoja' src="{% static 'img/peon-rojo.png' %}" width="45px" alt="">

            </div>

            <img class="img_peon" src="{% static 'img/barra.png' %}" width="370px" height="10px" alt="">

            <div class="row" ondragover="drop(event)">
              <img class="img_base">

              <img class="img_peon" draggable='true' ondragstart="dragIniciado(event)" ondragend="dragFinalizado(event)" id='fichaNegra' src="{% static 'img/peon-negro.png' %}" width="40px" alt="">

              <img class="img_peon" draggable='true' ondragstart="dragIniciado(event)" ondragend="dragFinalizado(event)" id='fichaRoja' src="{% static 'img/peon-rojo.png' %}" width="45px" alt="">
            </div>

            <img class="img_peon" src="{% static 'img/barra.png' %}" width="370px" height="10px" alt="">

            <div class="row" ondragover="drop(event)">
              <img class="img_base">

              <img class="img_peon" draggable='true' ondragstart="dragIniciado(event)" ondragend="dragFinalizado(event)" id='fichaNegra' src="{% static 'img/peon-negro.png' %}" width="40px" alt="">

              <img class="img_peon" draggable='true' ondragstart="dragIniciado(event)" ondragend="dragFinalizado(event)" id='fichaRoja' src="{% static 'img/peon-rojo.png' %}" width="45px" alt="">

            </div>

            <img class="img_peon" src="{% static 'img/barra.png' %}" width="370px" height="10px" alt="">

            <div class="row" ondragover="drop(event)">
              <img class="img_base">

              <img class="img_peon" draggable='true' ondragstart="dragIniciado(event)" ondragend="dragFinalizado(event)" id='fichaNegra' src="{% static 'img/peon-negro.png' %}" width="40px" alt="">

              <img class="img_peon" draggable='true' ondragstart="dragIniciado(event)" ondragend="dragFinalizado(event)" id='fichaRoja' src="{% static 'img/peon-rojo.png' %}" width="45px" alt="">

            </div>

            <img class="img_peon" src="{% static 'img/barra.png' %}" width="370px" height="10px" alt="">

            <div class="row" ondragover="drop(event)">
              <img class="img_base">

              <img class="img_peon" draggable='true' ondragstart="dragIniciado(event)" ondragend="dragFinalizado(event)" id='fichaNegra' src="{% static 'img/peon-negro.png' %}" width="40px" alt="">

              <img class="img_peon" draggable='true' ondragstart="dragIniciado(event)" ondragend="dragFinalizado(event)" id='fichaRoja' src="{% static 'img/peon-rojo.png' %}" width="45px" alt="">

            </div>

            <img class="img_peon" src="{% static 'img/barra.png' %}" width="370px" height="10px" alt="">

            <div class="row inicial" ondragover="drop(event)">
              <img class="img_base">

              <img class="img_peon" draggable='true' ondragstart="dragIniciado(event)" ondragend="dragFinalizado(event)" id='fichaRoja' src="{% static 'img/peon-rojo.png' %}" width="45px" alt="">
              <img class="img_peon" draggable='true' ondragstart="dragIniciado(event)" ondragend="dragFinalizado(event)" id='fichaRoja' src="{% static 'img/peon-rojo.png' %}" width="45px" alt="">
              <img class="img_peon" draggable='true' ondragstart="dragIniciado(event)" ondragend="dragFinalizado(event)" id='fichaRoja' src="{% static 'img/peon-rojo.png' %}" width="45px" alt="">
              <img class="img_peon" draggable='true' ondragstart="dragIniciado(event)" ondragend="dragFinalizado(event)" id='fichaRoja' src="{% static 'img/peon-rojo.png' %}" width="45px" alt="">
              <img class="img_peon" draggable='true' ondragstart="dragIniciado(event)" ondragend="dragFinalizado(event)" id='fichaRoja' src="{% static 'img/peon-rojo.png' %}" width="45px" alt="">
              <img class="img_peon" draggable='true' ondragstart="dragIniciado(event)" ondragend="dragFinalizado(event)" id='fichaRoja' src="{% static 'img/peon-rojo.png' %}" width="45px" alt="">

            </div>
        </span>
    </div>
    <div class="col s5 pull-s7">
        <span class="flow-text">
            <ul class="collection">
                <li class="collection-item avatar">
                    <i class="material-icons circle">mood</i>
                    <span class="title">Jugador Uno</span>
        <p>Movimiento: 1</p>
        <span class="title">Puntos: 8</span>

        <a href="#!" class="secondary-content"><i class="material-icons">grade</i></a>
        </li>
        <li class="collection-item avatar">
            <i class="material-icons circle">videogame_asset</i>
            <span class="title">Jugador Dos</span>
            <p>Movimiento: 1</p>
            <span class="title">Puntos: 2</span>
            <a href="#!" class="secondary-content"><i class="material-icons">grade</i></a>
        </li>
        </ul>
        </span>
    </div>
</div>

<script>
    console.log('Hola erika....')
    var dragged;

    function dragIniciado(event) {
        dragged = event.target;
        event.target.style.opacity = .5;
        console.log('dragIniciado')
    }

    function dragFinalizado(event) {
        event.target.style.opacity = "";
        console.log('dragFinalizado')
    }

    function dragEnter(event) {
        console.log('dragEnter', event.target.className)
        if (event.target.className == "row") {
            event.target.style.background = "yellow";
        }
    }

    function dragLeave(event) {
        console.log('dragLeave', event.target.className)
        if (event.target.className == "row") {
            event.target.style.background = "";
        }
    }

    function drop(event) {
        console.log('drop')
        event.preventDefault();
        // move dragged elem to the selected drop target
        console.log('drop', dragged)
        if (event.target.className == "row") {
          var x = event.target.innerHTML;
          var cont=0;
          for (var i = 0; i < x.length; i++) {
            if(x.substring(i,i+8)=="img_peon"){
              cont++;
            }

          }
          if(cont < 6){
            event.target.style.background = "";
            dragged.parentNode.removeChild(dragged);
            //document.getElementById("peon1").appendChild(dragged);

            //var div = '<div>'+dragged +'</div>'';
            event.target.appendChild(dragged);
            console.log('Tiene ' + cont);

          }else{
            console.log('No puede tener mas de 6 peones');
          }

        }else if (event.target.className == "row inicial") {
          event.target.style.background = "";
          dragged.parentNode.removeChild(dragged);

          event.target.appendChild(dragged);

        }
    }
</script>
<br>{%endblock%}
